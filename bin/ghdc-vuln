#!/usr/bin/env node

const yargs = require('yargs')

require('../index')(
    require('yargs')
        .usage('$0 [options] <query_term>', 'collect patch and source code from github', yargs =>
            yargs.positional('query-term', {
                describe: 'query keyword',
                type: 'string'
            })
        )
        .option('l', {
            alias: 'load-factor-api',
            default: 1,
            describe: 'Normal API rate limit factor, range: (0..1]',
            type: 'number'
        })
        .option('L', {
            alias: 'load-factor-search',
            default: 1,
            describe: 'Search API rate limit factor, range: (0..1]',
            type: 'number'
        })
        .option('t', {
            alias: 'token',
            describe: 'GitHub Access Token',
            type: 'string'
        })
        .option('n', {
            alias: 'name',
            describe: 'name of this task',
            type: 'string'
        })
        .option('v', {
            alias: 'verbose',
            describe: 'verbose output',
            type: 'boolean'
        })
        .option('O', {
            alias: 'output-dir',
            describe: 'output directory',
            type: 'string',
            default: 'data'
        })
        .argv
)